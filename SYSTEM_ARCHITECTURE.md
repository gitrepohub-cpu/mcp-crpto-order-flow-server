# ğŸ—ï¸ MCP Crypto Order Flow Server - Complete System Architecture

## ğŸ“‹ Table of Contents
- [System Overview](#system-overview)
- [Architecture Diagram](#architecture-diagram)
- [Data Flow Pipeline](#data-flow-pipeline)
- [Component Details](#component-details)
- [API Layer](#api-layer)
- [Frontend Integration](#frontend-integration)

---

## ğŸ¯ System Overview

The MCP Crypto Order Flow Server is a **production-grade** cryptocurrency analytics platform that:

1. **Collects** real-time data from 8 exchanges via WebSocket/REST
2. **Stores** data in DuckDB with 504 isolated tables
3. **Computes** 139+ institutional features in real-time
4. **Forecasts** using 38+ AI models (Statistical, ML, Deep Learning, Foundation)
5. **Exposes** 248 MCP tools via HTTP API
6. **Visualizes** via Sibyl Dashboard (Streamlit)

---

## ğŸ›ï¸ Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    ğŸŒ EXCHANGE LAYER                                    â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ Binance  â”‚ â”‚  Bybit   â”‚ â”‚   OKX    â”‚ â”‚  Kraken  â”‚ â”‚ Gate.io  â”‚ â”‚Hyperliquidâ”‚       â”‚
â”‚   â”‚ Futures  â”‚ â”‚ Futures  â”‚ â”‚ Futures  â”‚ â”‚ Futures  â”‚ â”‚ Futures  â”‚ â”‚          â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚            â”‚            â”‚            â”‚            â”‚            â”‚               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                                            â”‚
â”‚   â”‚ Binance  â”‚ â”‚  Bybit   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚   â”‚   Spot   â”‚ â”‚   Spot   â”‚    â”‚ Deribit  â”‚  (Options/Perpetuals)                      â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚               â”‚
         â”‚   WebSocket + REST APIs    â”‚
         â–¼            â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ğŸ“¡ DATA COLLECTION LAYER                                   â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         REST Clients (8 Exchange Clients)                        â”‚   â”‚
â”‚  â”‚  â€¢ BinanceRESTClient      â€¢ BybitRESTClient       â€¢ OKXRESTClient               â”‚   â”‚
â”‚  â”‚  â€¢ KrakenRESTClient       â€¢ GateioRESTClient      â€¢ HyperliquidRESTClient       â”‚   â”‚
â”‚  â”‚  â€¢ DeribitRESTClient      â€¢ BinanceSpotRESTClient                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                              â”‚
â”‚                                          â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      DirectExchangeClient (Unified Interface)                    â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Real-time Data Stores:                                                         â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ prices[symbol][exchange]        â†’ Latest price data                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ orderbooks[symbol][exchange]    â†’ Bid/Ask depth (100 levels)             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ trades[symbol][exchange]        â†’ Recent trades list                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ funding_rates[symbol][exchange] â†’ Funding rate data                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ liquidations[symbol]            â†’ Liquidation events                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ open_interest[symbol][exchange] â†’ OI data                                 â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ mark_prices[symbol][exchange]   â†’ Mark/Index prices                       â”‚   â”‚
â”‚  â”‚   â””â”€â”€ ticker_24h[symbol][exchange]    â†’ 24h volume stats                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               ğŸ’¾ STORAGE LAYER (DuckDB)                                 â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      504 Isolated Tables (Per Symbol/Exchange)                   â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   9 Symbols Ã— 8 Exchanges Ã— 7 Data Types = 504 Tables                           â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Tables per symbol/exchange:                                                    â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ {symbol}_{exchange}_prices       â†’ Price history                          â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ {symbol}_{exchange}_orderbook    â†’ Orderbook snapshots                    â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ {symbol}_{exchange}_trades       â†’ Trade history                          â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ {symbol}_{exchange}_funding      â†’ Funding rate history                   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ {symbol}_{exchange}_liquidations â†’ Liquidation events                     â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ {symbol}_{exchange}_oi           â†’ Open interest history                  â”‚   â”‚
â”‚  â”‚   â””â”€â”€ {symbol}_{exchange}_mark         â†’ Mark price history                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                          â”‚
â”‚   Supported Symbols (9):                                                                â”‚
â”‚   â”œâ”€â”€ Majors: BTCUSDT, ETHUSDT, SOLUSDT, XRPUSDT, ARUSDT                              â”‚
â”‚   â””â”€â”€ Memes:  BRETTUSDT, POPCATUSDT, WIFUSDT, PNUTUSDT                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸ§® FEATURE COMPUTATION LAYER                                 â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Institutional Feature Engine (139+ Features)                  â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   8 Feature Calculators:                                                         â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ PriceFeatureCalculator      â†’ 15 features (microprice, spread, etc.)      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ OrderbookFeatureCalculator  â†’ 15 features (depth, imbalance, walls)       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ TradeFeatureCalculator      â†’ 21 features (CVD, whale, flow toxicity)     â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ FundingFeatureCalculator    â†’ 12 features (rate, momentum, stress)        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ OIFeatureCalculator         â†’ 18 features (leverage, cascade risk)        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ LiquidationFeatureCalculatorâ†’ 10 features (cascade, intensity)            â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ MarkPriceFeatureCalculator  â†’ 8 features (basis, premium)                 â”‚   â”‚
â”‚  â”‚   â””â”€â”€ TickerFeatureCalculator     â†’ 10 features (volume, range)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                              â”‚
â”‚                                          â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       Signal Aggregator (15 Composite Signals)                   â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ smart_money_score         â†’ Institutional activity composite              â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ squeeze_probability       â†’ Short squeeze likelihood                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ stop_hunt_probability     â†’ Stop run detection                            â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ momentum_quality          â†’ Multi-factor momentum                         â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ regime_clarity            â†’ Market regime confidence                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ trend_strength            â†’ Directional conviction                        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ depth_asymmetry           â†’ Bid/ask imbalance                             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ wall_strength             â†’ Support/resistance walls                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ whale_activity_index      â†’ Large player detection                        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ flow_toxicity_index       â†’ Adverse selection                             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ iceberg_detection         â†’ Hidden liquidity                              â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ cascade_risk              â†’ Liquidation cascade probability               â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ leverage_stress           â†’ Market leverage level                         â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ funding_stress            â†’ Funding rate stress                           â”‚   â”‚
â”‚  â”‚   â””â”€â”€ volatility_forecast       â†’ Expected volatility                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             ğŸ¤– AI FORECASTING LAYER                                     â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Darts Integration (38+ Models)                              â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Statistical Models:                                                            â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ARIMA, Auto-ARIMA, ETS, Theta, Prophet, TBATS, FFT                        â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Machine Learning Models:                                                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ LightGBM, XGBoost, CatBoost, Random Forest, Linear Regression             â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Deep Learning Models:                                                          â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ N-BEATS, N-HiTS, TFT, Transformer, TCN, RNN, LSTM, GRU                    â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Foundation Models:                                                             â”‚   â”‚
â”‚  â”‚   â””â”€â”€ Chronos-2 (Mini, Small, Large) - Zero-shot forecasting                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                              â”‚
â”‚                                          â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Intelligent Model Router                                 â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Priority Modes:                                                                â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ realtime  â†’ Theta (fastest, ~50ms)                                        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ fast      â†’ LightGBM (low latency, good accuracy)                         â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ balanced  â†’ Auto-selection based on data                                  â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ accurate  â†’ TFT/N-HiTS (best accuracy)                                    â”‚   â”‚
â”‚  â”‚   â””â”€â”€ research  â†’ Chronos-2 Large (zero-shot)                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                ğŸ”§ MCP TOOLS LAYER                                       â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         248 MCP Tools (17 Categories)                            â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Exchange Tools:                                                                â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ binance_*     (25 tools) - Futures data                                   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ binance_spot_*(15 tools) - Spot data                                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ bybit_*       (20 tools) - Futures/Spot                                   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ okx_*         (18 tools) - Futures                                        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ kraken_*      (15 tools) - Futures/Spot                                   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ gateio_*      (12 tools) - Futures                                        â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ hyperliquid_* (10 tools) - Perps                                          â”‚   â”‚
â”‚  â”‚   â””â”€â”€ deribit_*     (15 tools) - Options/Perps                                  â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Analytics Tools:                                                               â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Forecasting      (15 tools) - AI predictions                              â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Institutional    (35 tools) - Feature analysis                            â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Cross-Exchange   (10 tools) - Arbitrage                                   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Streaming        (8 tools)  - Real-time                                   â”‚   â”‚
â”‚  â”‚   â””â”€â”€ Historical       (12 tools) - DuckDB queries                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ğŸŒ HTTP API LAYER (FastAPI)                                â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                           src/http_api.py (Port 8000)                            â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Core Endpoints:                                                                â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /health              â†’ System health check                           â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /tools               â†’ List all 248 tools                            â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ POST /tools/{tool_name}   â†’ Execute any MCP tool                          â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /symbols/{exchange}  â†’ List supported symbols (9)                    â”‚   â”‚
â”‚  â”‚   â””â”€â”€ GET  /exchanges           â†’ List supported exchanges (8)                  â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Convenience Endpoints:                                                         â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /features/{symbol}   â†’ All 139 features                              â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /signals/{symbol}    â†’ All 15 composite signals                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /forecast/{symbol}   â†’ Quick AI forecast                             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /regimes/{symbol}    â†’ Market regime detection                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ GET  /dashboard/{symbol}  â†’ Complete dashboard data                       â”‚   â”‚
â”‚  â”‚   â””â”€â”€ GET  /streaming/status    â†’ Streaming health                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸ–¥ï¸ SIBYL DASHBOARD (Streamlit)                               â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        sibyl_integration/frontend/ (Port 8501)                   â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   MCP Client Layer:                                                              â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ MCPClient (async)      â†’ Async HTTP client for API                        â”‚   â”‚
â”‚  â”‚   â””â”€â”€ SyncMCPClient          â†’ Sync wrapper for Streamlit                       â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Dashboard Pages (9):                                                           â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“Š MCP Dashboard       â†’ Main overview with metrics                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ›ï¸ Institutional       â†’ 139 features visualization                      â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“¡ Signal Aggregator   â†’ 15 composite signals                             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ­ Regime Analyzer     â†’ Market regime detection                          â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ”® Forecasting Studio  â†’ 38+ model predictions                            â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ”¬ Feature Explorer    â†’ Feature analysis tools                           â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ”€ Cross-Exchange      â†’ Arbitrage scanner                                â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸŒŠ Streaming Monitor   â†’ Real-time health                                 â”‚   â”‚
â”‚  â”‚   â””â”€â”€ âš™ï¸ Settings            â†’ Configuration                                    â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚   Widget Components:                                                             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Symbol Selector    â†’ Only 9 supported symbols                             â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Exchange Selector  â†’ Only 8 supported exchanges                           â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ Data Freshness     â†’ Timestamp indicators                                 â”‚   â”‚
â”‚  â”‚   â””â”€â”€ Error Handling     â†’ Graceful API error display                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Pipeline

### Step-by-Step Data Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              COMPLETE DATA FLOW                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Data Ingestion
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Exchange APIs (WebSocket/REST)
          â”‚
          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  8 REST Clients fetch data:         â”‚
   â”‚  â€¢ Prices (every 100ms)             â”‚
   â”‚  â€¢ Orderbook (every 500ms)          â”‚
   â”‚  â€¢ Trades (streaming)               â”‚
   â”‚  â€¢ Funding (every 8h snapshot)      â”‚
   â”‚  â€¢ OI (every 1s)                    â”‚
   â”‚  â€¢ Liquidations (streaming)         â”‚
   â”‚  â€¢ Mark prices (every 1s)           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 2: Unified Storage
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  DirectExchangeClient normalizes    â”‚
   â”‚  data into unified format:          â”‚
   â”‚                                      â”‚
   â”‚  {                                   â”‚
   â”‚    "symbol": "BTCUSDT",             â”‚
   â”‚    "exchange": "binance",           â”‚
   â”‚    "price": 89500.50,               â”‚
   â”‚    "timestamp": "2026-01-23T..."    â”‚
   â”‚  }                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 3: DuckDB Persistence
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  504 Isolated Tables:               â”‚
   â”‚                                      â”‚
   â”‚  btcusdt_binance_prices             â”‚
   â”‚  btcusdt_binance_orderbook          â”‚
   â”‚  btcusdt_binance_trades             â”‚
   â”‚  btcusdt_bybit_prices               â”‚
   â”‚  ethusdt_binance_prices             â”‚
   â”‚  ... (504 tables total)             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 4: Feature Computation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  8 Feature Calculators process      â”‚
   â”‚  raw data into 139 features:        â”‚
   â”‚                                      â”‚
   â”‚  Raw Orderbook â†’ Depth Imbalance    â”‚
   â”‚  Raw Trades â†’ CVD, Whale Detection  â”‚
   â”‚  Raw OI â†’ Leverage Risk Index       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 5: Signal Aggregation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Signal Aggregator combines         â”‚
   â”‚  features into 15 signals:          â”‚
   â”‚                                      â”‚
   â”‚  Features â†’ Smart Money Score       â”‚
   â”‚  Features â†’ Squeeze Probability     â”‚
   â”‚  Features â†’ Stop Hunt Detection     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 6: AI Forecasting
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Intelligent Router selects model:  â”‚
   â”‚                                      â”‚
   â”‚  Price History â†’ Darts Model        â”‚
   â”‚  Model Output â†’ Predictions         â”‚
   â”‚  Predictions â†’ Confidence Intervals â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 7: MCP Tool Exposure
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  248 MCP Tools wrap all functions:  â”‚
   â”‚                                      â”‚
   â”‚  binance_get_ticker(BTCUSDT)        â”‚
   â”‚  get_all_features(BTCUSDT)          â”‚
   â”‚  forecast_with_darts(BTCUSDT, 24h)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 8: HTTP API Layer
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  FastAPI exposes all tools:         â”‚
   â”‚                                      â”‚
   â”‚  POST /tools/binance_get_ticker     â”‚
   â”‚  GET  /features/BTCUSDT             â”‚
   â”‚  GET  /forecast/BTCUSDT             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
STEP 9: Sibyl Dashboard
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Streamlit visualizes results:      â”‚
   â”‚                                      â”‚
   â”‚  â€¢ Real-time price charts           â”‚
   â”‚  â€¢ Feature heatmaps                 â”‚
   â”‚  â€¢ Signal gauges                    â”‚
   â”‚  â€¢ Forecast confidence bands        â”‚
   â”‚  â€¢ Regime timeline                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              COMPONENT INTERACTION MAP                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   USER (Browser)    â”‚
                    â”‚   localhost:8501    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ HTTP
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SIBYL DASHBOARD (Streamlit)                                â”‚
â”‚                                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚   MCP       â”‚  â”‚ Institutionalâ”‚  â”‚  Forecastingâ”‚  â”‚   Regime    â”‚               â”‚
â”‚   â”‚  Dashboard  â”‚  â”‚  Features   â”‚  â”‚   Studio    â”‚  â”‚  Analyzer   â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚          â”‚                â”‚                â”‚                â”‚                        â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                    â”‚                                                  â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                          â”‚   SyncMCPClient   â”‚                                       â”‚
â”‚                          â”‚   (httpx sync)    â”‚                                       â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚ HTTP (localhost:8000)
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            HTTP API (FastAPI @ :8000)                                â”‚
â”‚                                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                         TOOL_REGISTRY (248 tools)                           â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚   POST /tools/{name} â†’ Lookup tool â†’ Execute â†’ Return JSON                  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚                                                â”‚
â”‚                                     â–¼                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                              MCP Tools                                       â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   Exchange Tools    â”‚   Analytics Tools    â”‚   Forecasting Tools            â”‚   â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚   â”‚
â”‚   â”‚   binance_*         â”‚   get_*_features     â”‚   forecast_with_darts          â”‚   â”‚
â”‚   â”‚   bybit_*           â”‚   get_*_signals      â”‚   forecast_quick               â”‚   â”‚
â”‚   â”‚   okx_*             â”‚   detect_regime      â”‚   forecast_ensemble            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                         â”‚                         â”‚
           â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Exchange REST   â”‚    â”‚  Feature Engine  â”‚    â”‚  Darts Forecast  â”‚
â”‚     Clients      â”‚    â”‚                  â”‚    â”‚                  â”‚
â”‚                  â”‚    â”‚  8 Calculators   â”‚    â”‚  38+ Models      â”‚
â”‚  â€¢ Binance       â”‚    â”‚  139 Features    â”‚    â”‚  Intelligent     â”‚
â”‚  â€¢ Bybit         â”‚    â”‚  15 Signals      â”‚    â”‚  Router          â”‚
â”‚  â€¢ OKX           â”‚    â”‚                  â”‚    â”‚                  â”‚
â”‚  â€¢ Kraken        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ Gate.io       â”‚             â”‚                       â”‚
â”‚  â€¢ Hyperliquid   â”‚             â”‚                       â”‚
â”‚  â€¢ Deribit       â”‚             â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â”‚                       â–¼                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
         â”‚              â”‚     DuckDB       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
                        â”‚  504 Tables      â”‚
                        â”‚  Historical Data â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Supported Data Matrix

| Symbol | Binance | Bybit | OKX | Kraken | Gate.io | Hyperliquid | Deribit |
|--------|---------|-------|-----|--------|---------|-------------|---------|
| BTCUSDT | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| ETHUSDT | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| SOLUSDT | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | - |
| XRPUSDT | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | - |
| ARUSDT  | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | - |
| BRETTUSDT | âœ… | âœ… | - | - | âœ… | - | - |
| POPCATUSDT | âœ… | âœ… | - | âœ… | âœ… | âœ… | - |
| WIFUSDT | âœ… | - | âœ… | âœ… | âœ… | âœ… | - |
| PNUTUSDT | âœ… | âœ… | - | âœ… | âœ… | âœ… | - |

---

## ğŸš€ Quick Start

```bash
# 1. Start MCP HTTP API
python -m uvicorn src.http_api:app --host 127.0.0.1 --port 8000

# 2. Start Sibyl Dashboard
streamlit run sibyl_integration/frontend/index_router.py --server.port 8501

# 3. Open browser
# API: http://localhost:8000
# Dashboard: http://localhost:8501
```

---

*Last Updated: January 23, 2026*
